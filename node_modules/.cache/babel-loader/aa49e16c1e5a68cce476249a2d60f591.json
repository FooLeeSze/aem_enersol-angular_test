{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lee Sze\\\\Documents\\\\technical-assessments\\\\aem-enersol\\\\aem-web-app\\\\aem-web-app\\\\src\\\\Components\\\\BarChart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst dataApiUrl = 'http://test-demo.aemenersol.com/api/dashboard';\nexport default function BarChart(_ref) {\n  _s();\n\n  let {\n    data\n  } = _ref;\n  const navigate = useNavigate();\n  const [dashData, setDashData] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const d3Chart = useRef();\n\n  async function fetchDashData(url, token) {\n    console.log('fetching data');\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    setDashData(data);\n    const chart = d3.select(d3Chart.current).attr('width', 500).attr('height', 200);\n    chart.selectAll('rect').data(data.chartBar).enter().append('rect').attr('x', (d, i) => i * 30).attr('y', d => 200 - d.value).attr('width', 20).attr('height', d => d.value);\n  }\n\n  function handleSignOut() {\n    sessionStorage.removeItem('aemToken');\n    setLoggedIn(false);\n  }\n\n  useEffect(() => {\n    const token = sessionStorage.getItem('aemToken');\n\n    if (token == null) {\n      navigate('/');\n    } else {\n      fetchDashData(dataApiUrl, token);\n      setLoggedIn(true);\n    }\n  }, [loggedIn]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSignOut,\n        children: \"Sign out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"dashboard\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Overview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), dashData && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"dash-main-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            ref: d3Chart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"First Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Last Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"User Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 33\n            }, this), dashData.tableUsers.map((user, i) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: i + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: user.firstName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: user.lastName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: user.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 41\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n\n_s(BarChart, \"II4xQs6ZpkIbERdXREhZJ6D8mYI=\", false, function () {\n  return [useNavigate];\n});\n\n_c = BarChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"BarChart\");","map":{"version":3,"names":["React","useEffect","useState","useRef","d3","useNavigate","dataApiUrl","BarChart","data","navigate","dashData","setDashData","loggedIn","setLoggedIn","d3Chart","fetchDashData","url","token","console","log","response","fetch","method","headers","json","chart","select","current","attr","selectAll","chartBar","enter","append","d","i","value","handleSignOut","sessionStorage","removeItem","getItem","tableUsers","map","user","firstName","lastName","username"],"sources":["C:/Users/Lee Sze/Documents/technical-assessments/aem-enersol/aem-web-app/aem-web-app/src/Components/BarChart.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst dataApiUrl = 'http://test-demo.aemenersol.com/api/dashboard';\r\n\r\nexport default function BarChart({data}) {\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const [dashData, setDashData] = useState(null);\r\n    const [loggedIn , setLoggedIn] = useState(false)\r\n\r\n    const d3Chart = useRef();\r\n\r\n\r\n    async function fetchDashData(url, token) {\r\n        console.log('fetching data')\r\n        const response = await fetch(url, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        })\r\n\r\n        const data = await response.json();\r\n        setDashData(data)\r\n\r\n        const chart = d3.select(d3Chart.current)\r\n                        .attr('width', 500)\r\n                        .attr('height', 200)\r\n\r\n        chart.selectAll('rect')\r\n            .data(data.chartBar)\r\n            .enter()\r\n            .append('rect')\r\n            .attr('x', (d, i) => i*30)\r\n            .attr('y', d => 200 - d.value)\r\n            .attr('width', 20)\r\n            .attr('height', d => d.value)\r\n            \r\n    }\r\n\r\n    function handleSignOut() {\r\n        sessionStorage.removeItem('aemToken')\r\n        setLoggedIn(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const token = sessionStorage.getItem('aemToken')\r\n        \r\n        if (token == null) {\r\n            navigate('/')\r\n        } else {\r\n            fetchDashData(dataApiUrl, token)\r\n            setLoggedIn(true)\r\n        }\r\n\r\n    }, [loggedIn])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <nav>\r\n                <h2>Dashboard</h2>\r\n                <button onClick={handleSignOut}>Sign out</button>\r\n            </nav>\r\n            <section id=\"dashboard\">\r\n                <h1>Overview</h1>\r\n                {dashData && \r\n                    <div id=\"dash-main-container\">\r\n                        <div className=\"card\">\r\n                            <svg ref={d3Chart}></svg>\r\n                        </div>\r\n                        <div className=\"card\">\r\n                            \r\n                        </div>\r\n                        <div className=\"card\">\r\n                            <table>\r\n                                <tr>\r\n                                    <th>#</th>\r\n                                    <th>First Name</th>\r\n                                    <th>Last Name</th>\r\n                                    <th>User Name</th>\r\n                                </tr>\r\n                                {dashData.tableUsers.map((user, i) => {\r\n                                    return (\r\n                                        <tr>\r\n                                            <td>{i+1}</td>\r\n                                            <td>{user.firstName}</td>\r\n                                            <td>{user.lastName}</td>\r\n                                            <td>{user.username}</td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                                \r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                \r\n                }\r\n                \r\n            </section>\r\n            \r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}